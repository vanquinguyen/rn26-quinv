<!DOCTYPE html>
<html>

<head>
  <title>Jquery Validate</title>
  <meta charset="utf-8" />
  <!-- Bootstrap -->
  <!-- CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
  <!-- SCRIPT -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>

  <!-- JQUERY VALDATION -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
  <!-- Validate file -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/additional-methods.min.js"></script>
  <style>
    .error {
      color: red;
    }
  </style>
</head>

<body>
  <!-- https://jqueryvalidation.org -->
  <!-- Video: https://www.youtube.com/watch?v=yaxUV3Ib4vM -->
  <!-- messages: http://stackoverflow.com/questions/2457032/jquery-validation-change-default-error-message -->
  <div class="container" style="margin-top: 40px;">
    <form id="myForm" action="">

      <div class="form-group">
        <label>Email address</label>
        <input id="input__email" type="email" class="form-control" name="email" placeholder="Email" />
      </div>
      
      <button onclick="handleSubmit(this)" class="btn btn-success">Submit</button>
      <button type="reset" class="btn btn-default">Reset</button>
    </form>
  </div>
</body>

<script>
  var settings = {
    rules: {
      
      email: {
        required: true,
        email: true,
        minlength: 6,
      },
    },
    messages: {
      email: {
        required: 'Bạn chưa nhập email',
        minlength: jQuery.validator.format('Toi thieu co {0} ky tu'),
        email: 'Dia chi email khong hop le',
      },
    },
  };

  var validator = $('#myForm').validate(settings);


  // post


  function handleReset() {
            let elementInputEmail = document.getElementById('input__email');
            let elementInputPassword = document.getElementById('input__password');
            let elementInputCheckBox = document.getElementById('input__checkbox');
            if (elementInputEmail) {
                elementInputEmail.value = '';
            }
            if (elementInputCheckBox) {
                elementInputCheckBox.checked = false;
            }
        }

        function handleSubmit(event) {
            let elementInputEmail = document.getElementById('input__email');
            let elementInputPassword = document.getElementById('input__password');
            let elementInputCheckBox = document.getElementById('input__checkbox');
            let objectUser = {
                name: elementInputEmail?.value,
                avatar:
                    "https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/254.jpg",
            }
            // console.log(objectUser);
            postData(objectUser)
            return false;
        }
        function postData(user) {
            fetch("https://634ea39cf34e1ed826920b12.mockapi.io/user", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(user),
            })
                .then((response) => response.json())
                .then((res) => console.log(res))
                .catch((error) => {
                    console.error("Error:", error);
                });
        }
</script>

</html>